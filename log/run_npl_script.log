========================================================================= 
Log Path: /Users/noltesz/geospatial_projects/PCOR_npl_proximity_for_points/log/run_npl_script.log 
Program Path: /Users/noltesz/geospatial_projects/PCOR_npl_proximity_for_points/run_npl_script.Rmd 
Working Directory: /Users/noltesz/geospatial_projects/PCOR_npl_proximity_for_points 
User Name: noltesz 
R Version: 4.3.0 (2023-04-21) 
Machine: ALMBP02246215 x86_64 
Operating System: Darwin 22.6.0 Darwin Kernel Version 22.6.0: Wed Oct 4 21:25:26 PDT 2023; root:xnu-8796.141.3.701.17~4/RELEASE_X86_64 
Base Packages: stats graphics grDevices utils datasets methods base Other Packages: readxl_1.4.2 sf_1.0-13 logr_1.3.4 lubridate_1.9.2 forcats_1.0.0 stringr_1.5.0 dplyr_1.1.2 purrr_1.0.1 readr_2.1.4 tidyr_1.3.0 tibble_3.2.1 ggplot2_3.4.2 tidyverse_2.0.0 
Log Start Time: 2023-11-22 20:50:44.463126 
========================================================================= 

========================================================================= 
Set arguments for function 'get_npl_proximity_for_points()'. 
========================================================================= 

receptor_filepath: ./input/input_receptor.csv 

source_npl_facilities_filepath: ./input/epa-national-priorities-list-ciesin-mod-v2-2014.xls 

us_borders_filepath: ./input/input_us_borders.rds 

assessment_year: 2017-10-01 

buffer_distance_km: 10 km 

proximity_metrics: distance_to_nearest, count_in_buffer, distance_in_buffer 

receptor_crs: GEOGCRS["NAD83", DATUM["North American Datum 1983", ELLIPSOID["GRS 1980",6378137,298.257222101, LENGTHUNIT["metre",1]]], PRIMEM["Greenwich",0, ANGLEUNIT["degree",0.0174532925199433]], CS[ellipsoidal,2], AXIS["geodetic latitude (Lat)",north, ORDER[1], ANGLEUNIT["degree",0.0174532925199433]], AXIS["geodetic longitude (Lon)",east, ORDER[2], ANGLEUNIT["degree",0.0174532925199433]], USAGE[ SCOPE["Geodesy."], AREA["North America - onshore and offshore: Canada - Alberta; British Columbia; Manitoba; New Brunswick; Newfoundland and Labrador; Northwest Territories; Nova Scotia; Nunavut; Ontario; Prince Edward Island; Quebec; Saskatchewan; Yukon. Puerto Rico. United States (USA) - Alabama; Alaska; Arizona; Arkansas; California; Colorado; Connecticut; Delaware; Florida; Georgia; Hawaii; Idaho; Illinois; Indiana; Iowa; Kansas; Kentucky; Louisiana; Maine; Maryland; Massachusetts; Michigan; Minnesota; Mississippi; Missouri; Montana; Nebraska; Nevada; New Hampshire; New Jersey; New Mexico; New York; North Carolina; North Dakota; Ohio; Oklahoma; Oregon; Pennsylvania; Rhode Island; South Carolina; South Dakota; Tennessee; Texas; Utah; Vermont; Virginia; Washington; West Virginia; Wisconsin; Wyoming. US Virgin Islands. British Virgin Islands."], BBOX[14.92,167.65,86.45,-40.73]], ID["EPSG",4269]] 

projection_crs: PROJCRS["North_America_Albers_Equal_Area_Conic", BASEGEOGCRS["NAD83", DATUM["North American Datum 1983", ELLIPSOID["GRS 1980",6378137,298.257222101, LENGTHUNIT["metre",1]]], PRIMEM["Greenwich",0, ANGLEUNIT["degree",0.0174532925199433]], ID["EPSG",4269]], CONVERSION["North_America_Albers_Equal_Area_Conic", METHOD["Albers Equal Area", ID["EPSG",9822]], PARAMETER["Latitude of false origin",40, ANGLEUNIT["degree",0.0174532925199433], ID["EPSG",8821]], PARAMETER["Longitude of false origin",-96, ANGLEUNIT["degree",0.0174532925199433], ID["EPSG",8822]], PARAMETER["Latitude of 1st standard parallel",20, ANGLEUNIT["degree",0.0174532925199433], ID["EPSG",8823]], PARAMETER["Latitude of 2nd standard parallel",60, ANGLEUNIT["degree",0.0174532925199433], ID["EPSG",8824]], PARAMETER["Easting at false origin",0, LENGTHUNIT["metre",1], ID["EPSG",8826]], PARAMETER["Northing at false origin",0, LENGTHUNIT["metre",1], ID["EPSG",8827]]], CS[Cartesian,2], AXIS["(E)",east, ORDER[1], LENGTHUNIT["metre",1]], AXIS["(N)",north, ORDER[2], LENGTHUNIT["metre",1]], USAGE[ SCOPE["Not known."], AREA["North America - onshore and offshore: Canada - Alberta; British Columbia; Manitoba; New Brunswick; Newfoundland and Labrador; Northwest Territories; Nova Scotia; Nunavut; Ontario; Prince Edward Island; Quebec; Saskatchewan; Yukon. United States (USA) - Alabama; Alaska (mainland); Arizona; Arkansas; California; Colorado; Connecticut; Delaware; Florida; Georgia; Idaho; Illinois; Indiana; Iowa; Kansas; Kentucky; Louisiana; Maine; Maryland; Massachusetts; Michigan; Minnesota; Mississippi; Missouri; Montana; Nebraska; Nevada; New Hampshire; New Jersey; New Mexico; New York; North Carolina; North Dakota; Ohio; Oklahoma; Oregon; Pennsylvania; Rhode Island; South Carolina; South Dakota; Tennessee; Texas; Utah; Vermont; Virginia; Washington; West Virginia; Wisconsin; Wyoming."], BBOX[23.81,-172.54,86.46,-47.74]], ID["ESRI",102008]] 

check_near_us_border: TRUE 

add_all_to_output: TRUE 

print_log_to_console: TRUE 

write_log_to_file: TRUE 

========================================================================= 
Check format of receptor points data frame. 
========================================================================= 

Year for exposure assessment set to 2017. 

Point receptor data frame has 12 columns and 1000 rows. 

========================================================================= 
Check whether point receptors are within buffer distance of border. 
========================================================================= 

Status update: Buffering borders... 

Warning: 22 receptor points are within 10 km of border. 

========================================================================= 
Check format of receptor points data frame. 
========================================================================= 

Year for exposure assessment set to 2017. 

Point receptor data frame has 12 columns and 1000 rows. 

========================================================================= 
Check whether point receptors are within buffer distance of border. 
========================================================================= 

Error in st_transform.sfc(st_geometry(x), crs, ...) : cannot transform sfc object with missing crs 
Traceback: 
 [1] "8: stop(\"cannot transform sfc object with missing crs\")"                                                                                  
 [2] "7: st_transform.sfc(st_geometry(x), crs, ...)"                                                                                              
 [3] "6: st_transform(st_geometry(x), crs, ...)"                                                                                                  
 [4] "5: st_transform.sf(receptor_sf, crs = projection_crs)"                                                                                      
 [5] "4: sf::st_transform(receptor_sf, crs = projection_crs) at check_point_receptor_near_border.R#76"                                            
 [6] "3: check_point_receptor_near_border(receptor_sf, border_sf = us_borders_sf, "                                                               
 [7] "       buffer_distance_km = buffer_distance_km, projection_crs = projection_crs, "                                                          
 [8] "       print_log_to_console = print_log_to_console, write_log_to_file = write_log_to_file) at npl_proximity_points_transform_calculate.R#89"
 [9] "2: check_us_border(check_near_us_border = TRUE, us_borders_filepath, "                                                                      
[10] "       buffer_distance_km, write_log_to_file, print_log_to_console, "                                                                       
[11] "       projection_crs, receptor_sf = receptor_sf) at script_npl_proximity_for_points_V2.R#134"                                              
[12] "1: get_npl_facility_proximity_for_points_V2(receptor_filepath = \"./input/input_receptor.csv\", "                                           
[13] "       source_npl_facilities_filepath = \"./input/epa-national-priorities-list-ciesin-mod-v2-2014.xls\", "                                  
[14] "       us_borders_filepath = \"./input/input_us_borders.rds\", buffer_distance_km = 10, "                                                   
[15] "       p_NPL_Status = \"Deleted from the Final NPL\", assessment_year = \"2017-10-01\", "                                                   
[16] "       time_option = \"single_year_only\")"                                                                                                 

========================================================================= 
Log End Time: 2023-11-22 20:50:49.222136 
Log Elapsed Time: 0 00:00:04 
========================================================================= 
